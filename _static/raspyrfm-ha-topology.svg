<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 450" role="img" aria-labelledby="title desc">
  <title id="title">Home Assistant topology with RaspyRFM gateway</title>
  <desc id="desc">Illustration of a Raspberry Pi hosting Home Assistant that controls wireless receivers through a RaspyRFM module.</desc>
  <defs>
    <style>
      text { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; fill: #0f172a; }
      .caption { font-size: 22px; font-weight: 700; letter-spacing: 0.02em; }
      .label { font-size: 17px; }
      .small { font-size: 15px; }
    </style>
    <filter id="shadow">
      <feGaussianBlur in="SourceAlpha" stdDeviation="4"/>
      <feOffset dx="0" dy="4" result="offsetblur"/>
      <feComponentTransfer>
        <feFuncA type="linear" slope="0.3"/>
      </feComponentTransfer>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <marker id="arrow" viewBox="0 0 10 10" refX="7" refY="5" markerUnits="strokeWidth" markerWidth="10" markerHeight="10" orient="auto">
      <path d="M0 0 L10 5 L0 10 z" fill="#1e88e5"/>
    </marker>
  </defs>
  
  <!-- Home Assistant Container -->
  <rect x="60" y="80" width="260" height="240" rx="24" fill="#93c5fd" stroke="#1d4ed8" stroke-width="5" filter="url(#shadow)"/>
  <text x="190" y="120" text-anchor="middle" class="caption" fill="#1e3a8a">Home Assistant</text>
  <text x="190" y="148" text-anchor="middle" class="label" fill="#1e40af">Core / Supervisor</text>
  
  <!-- Integration Box -->
  <rect x="95" y="170" width="190" height="120" rx="16" fill="#fef3c7" stroke="#d97706" stroke-width="4"/>
  <text x="190" y="205" text-anchor="middle" class="label" fill="#92400e">RaspyRFM</text>
  <text x="190" y="230" text-anchor="middle" class="label" fill="#92400e">Integration</text>
  <text x="190" y="260" text-anchor="middle" class="small" fill="#78350f">custom_components/</text>
  <text x="190" y="280" text-anchor="middle" class="small" fill="#78350f">raspyrfm</text>
  
  <!-- Gateway Container -->
  <rect x="370" y="120" width="200" height="180" rx="24" fill="#6ee7b7" stroke="#047857" stroke-width="5" filter="url(#shadow)"/>
  <text x="470" y="162" text-anchor="middle" class="caption" fill="#064e3b">RaspyRFM</text>
  <text x="470" y="188" text-anchor="middle" class="caption" fill="#064e3b">Gateway</text>
  <text x="470" y="218" text-anchor="middle" class="label" fill="#065f46">UDP Bridge</text>
  <text x="470" y="244" text-anchor="middle" class="small" fill="#065f46">Ports: 49880/49881</text>
  <text x="470" y="270" text-anchor="middle" class="label" fill="#065f46">SPI → RF Radio</text>
  
  <!-- RF Devices -->
  <g transform="translate(630,60)">
    <rect x="0" y="0" width="220" height="95" rx="18" fill="#fde68a" stroke="#b45309" stroke-width="4" filter="url(#shadow)"/>
    <text x="110" y="35" text-anchor="middle" class="label" fill="#92400e">433 MHz Devices</text>
    <text x="110" y="60" text-anchor="middle" class="small" fill="#78350f">Switches · Sockets</text>
    <text x="110" y="82" text-anchor="middle" class="small" fill="#78350f">Weather Stations</text>
  </g>
  
  <g transform="translate(630,175)">
    <rect x="0" y="0" width="220" height="95" rx="18" fill="#ddd6fe" stroke="#7c3aed" stroke-width="4" filter="url(#shadow)"/>
    <text x="110" y="35" text-anchor="middle" class="label" fill="#5b21b6">868 MHz Devices</text>
    <text x="110" y="60" text-anchor="middle" class="small" fill="#4c1d95">Thermostats</text>
    <text x="110" y="82" text-anchor="middle" class="small" fill="#4c1d95">Alarm Sensors</text>
  </g>
  
  <g transform="translate(630,290)">
    <rect x="0" y="0" width="220" height="95" rx="18" fill="#fecaca" stroke="#dc2626" stroke-width="4" filter="url(#shadow)"/>
    <text x="110" y="35" text-anchor="middle" class="label" fill="#991b1b">Door/Window</text>
    <text x="110" y="60" text-anchor="middle" class="label" fill="#991b1b">Sensors</text>
    <text x="110" y="82" text-anchor="middle" class="small" fill="#7f1d1d">Motion Detectors</text>
  </g>
  
  <!-- Connection Lines -->
  <line x1="320" y1="230" x2="370" y2="210" stroke="#1e88e5" stroke-width="6" marker-end="url(#arrow)"/>
  <text x="345" y="215" text-anchor="middle" class="small" fill="#1e88e5" font-weight="600">UDP</text>
  
  <line x1="570" y1="210" x2="630" y2="107" stroke="#1e88e5" stroke-width="5" marker-end="url(#arrow)"/>
  <line x1="570" y1="210" x2="630" y2="222" stroke="#1e88e5" stroke-width="5" marker-end="url(#arrow)"/>
  <line x1="570" y1="210" x2="630" y2="337" stroke="#1e88e5" stroke-width="5" marker-end="url(#arrow)"/>
  
  <text x="595" y="150" text-anchor="middle" class="small" fill="#1e88e5" font-weight="600">RF</text>
  <text x="595" y="240" text-anchor="middle" class="small" fill="#1e88e5" font-weight="600">RF</text>
  <text x="595" y="320" text-anchor="middle" class="small" fill="#1e88e5" font-weight="600">RF</text>
  
  <!-- Bottom Label -->
  <text x="450" y="430" text-anchor="middle" class="label" fill="#475569">Raspberry Pi (Ethernet or Wi-Fi) · Docker or Home Assistant OS</text>
</svg>
